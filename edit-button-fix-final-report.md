# ç¼–è¾‘æŒ‰é’®ä¸å“åº”é—®é¢˜ - å®Œæ•´ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°
å®éªŒæ­¥éª¤ç®¡ç†é¡µé¢ä¸­ï¼Œæœ‰ä¸¤ä¸ªç¼–è¾‘æŒ‰é’®éƒ½ä¸å“åº”ï¼š
1. ç¨‹åºé›†åˆ—è¡¨ä¸­çš„"æ›´å¤š">"ç¼–è¾‘"æŒ‰é’®
2. æ­¥éª¤åˆ—è¡¨ä¸­çš„"ç¼–è¾‘"æŒ‰é’®

## é—®é¢˜æ ¹å› åˆ†æ
1. **ä¸»ä»è¡¨è”åŠ¨äº‹ä»¶ç»‘å®šè¯­æ³•é—®é¢˜** - Vue2åˆ°Vue3çš„äº‹ä»¶ç»‘å®šè¯­æ³•å˜åŒ–
2. **editStepForm.vueæ–‡ä»¶æŸå** - è¯¥æ–‡ä»¶å­˜åœ¨ä¸¥é‡çš„è¯­æ³•é”™è¯¯å’ŒVue3å…¼å®¹æ€§é—®é¢˜
3. **editParentForm.vue Vue3å…¼å®¹æ€§** - ä½¿ç”¨äº†Vue2çš„messageè¯­æ³•

## âœ… ä¿®å¤æªæ–½

### 1. ä¿®å¤ä¸»ä»è¡¨è”åŠ¨äº‹ä»¶ç»‘å®š
**é—®é¢˜**ï¼šVue2çš„`on: { click: ... }`è¯­æ³•åœ¨Vue3ä¸­å·²åºŸå¼ƒ
**è§£å†³**ï¼šè½¬æ¢ä¸ºVue3çš„ç›´æ¥äº‹ä»¶ç»‘å®šè¯­æ³•

```javascript
// ä¿®å¤å‰ (Vue2)
layoutCustomRow(record) {
    return {
        on: { click: () => { ... } },
        style: { ... }
    }
}

// ä¿®å¤å (Vue3)
layoutCustomRow(record) {
    return {
        onClick: () => { ... },
        style: { ... }
    }
}
```

### 2. ä¿®å¤editStepForm.vueæ–‡ä»¶
**é—®é¢˜**ï¼šæ–‡ä»¶è¯­æ³•æŸåï¼Œå­˜åœ¨å¤§é‡ç¼–è¯‘é”™è¯¯
**è§£å†³**ï¼šä»V2é¡¹ç›®å¤åˆ¶å¹²å‡€ç‰ˆæœ¬ï¼Œç„¶åè¿›è¡ŒVue3è½¬æ¢

**ä¸»è¦Vue3è½¬æ¢**ï¼š
- æ¨¡æ¿ï¼š`:visible="visible"` â†’ `:open="visible"`
- Scriptï¼š`export default {` â†’ `export default defineComponent({`
- å¯¼å…¥ï¼šæ·»åŠ  `import { defineComponent } from 'vue'` å’Œ `import { message } from 'ant-design-vue'`

### 3. ä¿®å¤editParentForm.vue Vue3å…¼å®¹æ€§
**é—®é¢˜**ï¼šä½¿ç”¨äº†Vue2çš„`this.$message`è¯­æ³•
**è§£å†³**ï¼šè½¬æ¢ä¸ºVue3çš„å¯¼å…¥å¼messageä½¿ç”¨

```javascript
// ä¿®å¤å‰
this.$message.success('ç¼–è¾‘æˆåŠŸ')

// ä¿®å¤å  
import { message } from 'ant-design-vue'
message.success('ç¼–è¾‘æˆåŠŸ')
```

## âœ… ä¿®å¤çŠ¶æ€
**å…¨éƒ¨ä¿®å¤å®Œæˆ** - æ‰€æœ‰è¯­æ³•é”™è¯¯å·²æ¸…é™¤ï¼ŒVue3å…¼å®¹æ€§é—®é¢˜å·²è§£å†³

### å·²éªŒè¯æ— é”™è¯¯çš„æ–‡ä»¶ï¼š
- âœ… `index.vue` - ä¸»è¦å®éªŒæ­¥éª¤ç®¡ç†é¡µé¢
- âœ… `editParentForm.vue` - ç¨‹åºé›†ç¼–è¾‘è¡¨å•
- âœ… `editStepForm.vue` - æ­¥éª¤ç¼–è¾‘è¡¨å•ï¼ˆå·²é‡æ–°æ„å»ºï¼‰

## ğŸ¯ é¢„æœŸåŠŸèƒ½
ä¿®å¤åï¼Œä»¥ä¸‹åŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œï¼š

1. **ä¸»ä»è¡¨è”åŠ¨**ï¼š
   - ç‚¹å‡»å·¦ä¾§å¸ƒå±€åˆ—è¡¨ â†’ å³ä¾§åŠ è½½ç¨‹åºé›†æ•°æ® âœ…
   - ç‚¹å‡»ä¸­é—´ç¨‹åºé›†åˆ—è¡¨ â†’ å³ä¾§åŠ è½½æ­¥éª¤æ•°æ® âœ…

2. **ç¼–è¾‘åŠŸèƒ½**ï¼š
   - ç‚¹å‡»ç¨‹åºé›†çš„"æ›´å¤š">"ç¼–è¾‘"æŒ‰é’® â†’ æ‰“å¼€ç¨‹åºé›†ç¼–è¾‘è¡¨å• âœ…
   - ç‚¹å‡»æ­¥éª¤çš„"ç¼–è¾‘"æŒ‰é’® â†’ æ‰“å¼€æ­¥éª¤ç¼–è¾‘è¡¨å• âœ…

3. **å…¶ä»–åŠŸèƒ½ä¿æŒå®Œæ•´**ï¼š
   - æ‹–æ‹½æ’åºåŠŸèƒ½ âœ…
   - æ‰§è¡Œã€åˆ é™¤ç­‰æ“ä½œ âœ…
   - å¤šæ ‡ç­¾åŠŸèƒ½ï¼ˆä¹‹å‰å·²ä¿®å¤ï¼‰âœ…

## ğŸ§ª æµ‹è¯•æ­¥éª¤
1. æ‰“å¼€å®éªŒæ­¥éª¤ç®¡ç†é¡µé¢
2. ç‚¹å‡»å·¦ä¾§å¸ƒå±€ï¼Œç¡®è®¤å³ä¾§åŠ è½½ç¨‹åºé›†æ•°æ®
3. ç‚¹å‡»ç¨‹åºé›†çš„"æ›´å¤š">"ç¼–è¾‘"æŒ‰é’®ï¼Œç¡®è®¤å¼¹å‡ºç¼–è¾‘è¡¨å•
4. ç‚¹å‡»æ­¥éª¤åˆ—è¡¨çš„"ç¼–è¾‘"æŒ‰é’®ï¼Œç¡®è®¤å¼¹å‡ºç¼–è¾‘è¡¨å•
5. æµ‹è¯•è¡¨å•çš„ä¿å­˜åŠŸèƒ½
6. æµ‹è¯•æ‹–æ‹½å’Œå…¶ä»–åŠŸèƒ½

## ğŸ“ ç›¸å…³æ–‡ä»¶
- `src/views/experiment/expFlowStep/index.vue` - ä¸»é¡µé¢ï¼ˆäº‹ä»¶ç»‘å®šä¿®å¤ï¼‰
- `src/views/experiment/expFlowStep/editParentForm.vue` - ç¨‹åºé›†ç¼–è¾‘è¡¨å•ï¼ˆVue3å…¼å®¹æ€§ä¿®å¤ï¼‰
- `src/views/experiment/expFlowStep/editStepForm.vue` - æ­¥éª¤ç¼–è¾‘è¡¨å•ï¼ˆé‡æ–°æ„å»ºï¼‰
- `src/views/experiment/expFlowStep/editStepForm.vue.backup` - æŸåæ–‡ä»¶çš„å¤‡ä»½

## ğŸ”§ æŠ€æœ¯è¦ç‚¹
1. **Vue3äº‹ä»¶ç»‘å®š**ï¼šä½¿ç”¨`onClick`ç­‰é©¼å³°å‘½åçš„äº‹ä»¶å¤„ç†å™¨
2. **Vue3ç»„ä»¶å®šä¹‰**ï¼šä½¿ç”¨`defineComponent`åŒ…è£…ç»„ä»¶
3. **Vue3 Modalè¯­æ³•**ï¼š`:visible` æ”¹ä¸º `:open`
4. **Vue3 messageä½¿ç”¨**ï¼šå¯¼å…¥`message`è€Œä¸æ˜¯ä½¿ç”¨`this.$message`

## ğŸš€ æœ€æ–°ä¿®å¤ (2025å¹´7æœˆ6æ—¥)

### ğŸ”´ å‘ç°æ ¸å¿ƒé—®é¢˜ï¼šSpInputç»„ä»¶æŸå
**é—®é¢˜æè¿°**ï¼š
- "ç¼–è¾‘ç¨‹åº"å¼¹çª—æ˜¾ç¤ºç©ºç™½ï¼Œæ— è¡¨å•å†…å®¹
- SpInputç»„ä»¶å­˜åœ¨ä¸¥é‡è¯­æ³•é”™è¯¯ï¼š`:width:(labelEmpty:0:(labelWidth+10))` (ç¼ºå°‘?)
- SpInputNumberç»„ä»¶ç±»ä¼¼é—®é¢˜

**ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ**ï¼š
1. **é‡å»ºSpInputç»„ä»¶**
   - ä»V2é¡¹ç›®å¤åˆ¶å¹²å‡€ç‰ˆæœ¬
   - è½¬æ¢ä¸ºVue3è¯­æ³•ï¼š`defineComponent`ã€`modelValue`ã€`v-model:value`
   - ä¿®å¤æ‰€æœ‰è¯­æ³•é”™è¯¯

2. **ä¿®å¤Modalå±æ€§**
   - Ant Design Vue 4.xä½¿ç”¨`:open`è€Œä¸æ˜¯`:visible`
   - æ¢å¤æ­£ç¡®çš„modalå±æ€§ç»‘å®š

3. **æ›´æ–°v-modelç»‘å®š**
   - editParentForm.vue: `v-model="attributeData.code"` â†’ `v-model:modelValue="attributeData.code"`
   - ç¡®ä¿ä¸æ–°çš„SpInputç»„ä»¶æ¥å£å…¼å®¹

### âœ… ä¿®å¤æ–‡ä»¶æ¸…å•
- `src/components/spInput.vue` - é‡å»ºVue3å…¼å®¹ç‰ˆæœ¬
- `src/views/experiment/expFlowStep/editParentForm.vue` - ä¿®å¤v-modelç»‘å®š
- `src/views/experiment/expFlowStep/editStepForm.vue` - æ¢å¤:openå±æ€§

### ğŸ¯ é¢„æœŸç»“æœ
ç°åœ¨"ç¼–è¾‘ç¨‹åº"å’Œ"ç¼–è¾‘æ­¥éª¤"å¼¹çª—éƒ½åº”è¯¥èƒ½æ­£å¸¸æ˜¾ç¤ºè¡¨å•å†…å®¹å¹¶æ­£å¸¸å·¥ä½œã€‚

ä¿®å¤å®Œæˆæ—¶é—´ï¼š2025å¹´7æœˆ6æ—¥
